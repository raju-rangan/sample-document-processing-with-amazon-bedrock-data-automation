from typing import List
import boto3

# Initialize the correct Boto3 client
client = boto3.client('bedrock-data-automation', region_name='us-east-1')

def create_project(blueprint_arns: List[str]):
    resp = client.create_data_automation_project(
    projectName="IRLA",
    projectDescription="",
    projectStage="LIVE",
    standardOutputConfiguration={
            "document": {
                "extraction": {
                    "granularity": {"types": ["PAGE", "ELEMENT"]},
                    "boundingBox": {"state": "DISABLED"}
                },
                "generativeField": {"state": "DISABLED"},
                "outputFormat": {
                    "textFormat": {"types": ["MARKDOWN"]},
                    "additionalFileFormat": {"state": "DISABLED"}
                }
            },
            "image": {
                "extraction": {
                    "category": {"state": "ENABLED", "types": ["TEXT_DETECTION"]},
                    "boundingBox": {"state": "ENABLED"}
                },
                "generativeField": {"state": "ENABLED", "types": ["IMAGE_SUMMARY"]}
            },
            "video": {
                "extraction": {
                    "category": {"state": "ENABLED", "types": ["TEXT_DETECTION"]},
                    "boundingBox": {"state": "ENABLED"}
                },
                "generativeField": {
                    "state": "ENABLED",
                    "types": ["VIDEO_SUMMARY", "CHAPTER_SUMMARY"]
                }
            },
            "audio": {
                "extraction": {"category": {"state": "ENABLED", "types": ["TRANSCRIPT"]}},
                "generativeField": {"state": "DISABLED"}
            }
        },
        overrideConfiguration={
            "document": {
                "splitter": {"state": "ENABLED"},
                "modalityProcessing": {"state": "ENABLED"}
            },
            "image": {"modalityProcessing": {"state": "ENABLED"}},
            "video": {"modalityProcessing": {"state": "ENABLED"}},
            "audio": {"modalityProcessing": {"state": "ENABLED"}},
            "modalityRouting": {}
        },
        customOutputConfiguration={
            'blueprints': [{"blueprintArn": arn, 'blueprintStage': 'LIVE'} for arn in blueprint_arns]
        },
    )
    project_arn = resp["projectArn"]
    print(f"✅ Created project: {project_arn}")
    return project_arn

def create_blueprints(): 
    blueprint_schemas = {
        "employment-info": EMPLOYMENT_INFO_SCHEMA,
        "loan-property-info": LOAN_PROPERTY_INFO_SCHEMA,
        "irla-personal-information": PERSONAL_INFO_SCHEMA,
        "underwriter-note": UNDERWRITER_NOTE_SCHEMA,
        "assets-liabilities": ASSETS_LIABILITIES_SCHEMA,
    }
    arns = []
    for name, schema in blueprint_schemas.items():
        resp = client.create_blueprint(
            blueprintName=name,
            type="DOCUMENT",
            schema=schema
        )
        arn = resp["blueprint"]["blueprintArn"]
        print(f"✅ Blueprint created: {name} -> {arn}")
        arns.append(arn)
    return arns

def main():
    blueprint_arns = create_blueprints()
    project_arn = create_project(blueprint_arns=blueprint_arns)
    print(project_arn)

EMPLOYMENT_INFO_SCHEMA = "{\"$schema\":\"http://json-schema.org/draft-07/schema#\",\"description\":\"Blueprint for extracting employment and income information from mortgage application forms\",\"class\":\"Employment and Income Information\",\"type\":\"object\",\"definitions\":{\"employer_address\":{\"type\":\"object\",\"properties\":{\"street\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"street of the employer address\"},\"unit\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"unit number of the employer address\"},\"city\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"city of the employer address\"},\"state\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"state of the employer address\"},\"zip\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"ZIP code of the employer address\"},\"country\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"country of the employer address\"}}},\"employment_duration\":{\"type\":\"object\",\"properties\":{\"years\":{\"type\":\"number\",\"inferenceType\":\"explicit\",\"instruction\":\"number of years in this line of work\"},\"months\":{\"type\":\"number\",\"inferenceType\":\"explicit\",\"instruction\":\"additional months in this line of work\"}}},\"monthly_income_breakdown\":{\"type\":\"object\",\"properties\":{\"base\":{\"type\":\"number\",\"inferenceType\":\"explicit\",\"instruction\":\"base monthly income in dollars\"},\"overtime\":{\"type\":\"number\",\"inferenceType\":\"explicit\",\"instruction\":\"overtime monthly income in dollars\"},\"bonus\":{\"type\":\"number\",\"inferenceType\":\"explicit\",\"instruction\":\"bonus monthly income in dollars\"},\"commission\":{\"type\":\"number\",\"inferenceType\":\"explicit\",\"instruction\":\"commission monthly income in dollars\"},\"military_entitlements\":{\"type\":\"number\",\"inferenceType\":\"explicit\",\"instruction\":\"military entitlements monthly income in dollars\"},\"other\":{\"type\":\"number\",\"inferenceType\":\"explicit\",\"instruction\":\"other monthly income in dollars\"}}}},\"properties\":{\"does_not_apply\":{\"type\":\"boolean\",\"inferenceType\":\"explicit\",\"instruction\":\"Indicates if this employment section does not apply to the applicant\"},\"employer_name\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"Name of employer or business\"},\"employer_phone\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"Phone number of the employer\"},\"employer_address\":{\"$ref\":\"#/definitions/employer_address\",\"instruction\":\"Address of the employer\"},\"position_title\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"Applicant's position or job title\"},\"start_date\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"Employment start date in mm/dd/yyyy format\"},\"work_duration\":{\"$ref\":\"#/definitions/employment_duration\",\"instruction\":\"Duration of experience in this line of work\"},\"is_business_owner\":{\"type\":\"boolean\",\"inferenceType\":\"explicit\",\"instruction\":\"Indicates if the applicant is the business owner or self-employed\"},\"income_breakdown\":{\"$ref\":\"#/definitions/monthly_income_breakdown\",\"instruction\":\"Breakdown of different income sources\"},\"gross_monthly_income\":{\"type\":\"number\",\"inferenceType\":\"explicit\",\"instruction\":\"Total gross monthly income in dollars\"}}}"
LOAN_PROPERTY_INFO_SCHEMA = "{\"$schema\":\"http://json-schema.org/draft-07/schema#\",\"description\":\"Blueprint for extracting loan and property information from mortgage application forms\",\"class\":\"Loan and Property Information\",\"type\":\"object\",\"definitions\":{\"property_address\":{\"type\":\"object\",\"properties\":{\"street\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"Street address of the property\"},\"unit\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"Unit number of the property, if applicable\"},\"city\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"City where the property is located\"},\"state\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"State where the property is located\"},\"zip\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"ZIP code of the property\"},\"county\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"County where the property is located\"}}}},\"properties\":{\"loan_amount\":{\"type\":\"number\",\"inferenceType\":\"explicit\",\"instruction\":\"Total amount of the loan being requested in dollars\"},\"loan_purpose\":{\"enum\":[\"PURCHASE\",\"REFINANCE\",\"OTHER\"],\"instruction\":\"Purpose of the loan (Purchase, Refinance, or Other)\",\"inferenceType\":\"explicit\"},\"loan_purpose_other_description\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"Description of loan purpose if 'Other' is selected\"},\"property_address\":{\"$ref\":\"#/definitions/property_address\",\"instruction\":\"Address of the property being purchased or refinanced\"},\"number_of_units\":{\"type\":\"number\",\"inferenceType\":\"explicit\",\"instruction\":\"Number of units in the property\"},\"occupancy_type\":{\"enum\":[\"PRIMARY_RESIDENCE\",\"SECOND_HOME\",\"INVESTMENT_PROPERTY\",\"FHA_SECONDARY_RESIDENCE\"],\"instruction\":\"How the property will be occupied (Primary Residence, Second Home, Investment Property, or FHA Secondary Residence)\",\"inferenceType\":\"explicit\"},\"mixed_use_property\":{\"type\":\"boolean\",\"inferenceType\":\"explicit\",\"instruction\":\"Indicates if part of the property will be used for business purposes (e.g., daycare facility, medical office)\"},\"manufactured_home\":{\"type\":\"boolean\",\"inferenceType\":\"explicit\",\"instruction\":\"Indicates if the property is a manufactured home (factory built on a permanent chassis)\"}}}"
PERSONAL_INFO_SCHEMA = "{\"$schema\":\"http://json-schema.org/draft-07/schema#\",\"description\":\"This is a blueprint for a mortgage loan application form\",\"class\":\"Mortgage Loan Application Form\",\"type\":\"object\",\"definitions\":{\"address\":{\"type\":\"object\",\"properties\":{\"street\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"street of the current address\"},\"unit\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"unit  of the current address\"},\"city\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"city of the current address\"},\"state\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"state of the current address\"},\"zip\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"zip of the current address\"},\"country\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"country of the current address\"}}},\"name\":{\"type\":\"object\",\"properties\":{\"first\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"First name of the applicant\"},\"middle\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"Middle name of the applicant\"},\"last\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"Last name of the applicant\"},\"suffix\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"Name suffix (Jr., Sr., III, etc.) if applicable\"}}},\"dependents\":{\"type\":\"object\",\"properties\":{\"number\":{\"type\":\"number\",\"inferenceType\":\"explicit\",\"instruction\":\"Number of dependents\"},\"ages\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"Ages of dependents (comma-separated list)\"}}},\"contact_info\":{\"type\":\"object\",\"properties\":{\"home_phone\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"Home telephone number\"},\"cell_phone\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"Mobile/cell phone number\"},\"work_phone\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"Work telephone number\"},\"email\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"Email address\"}}},\"housing\":{\"type\":\"object\",\"properties\":{\"status\":{\"enum\":[\"OWN\",\"RENT\",\"NPH\"],\"instruction\":\"Current housing arrangement (OWN: Own, RENT: Rent, NPH: No primary housing expense)\",\"inferenceType\":\"explicit\"},\"expense_monthly\":{\"type\":\"number\",\"inferenceType\":\"explicit\",\"instruction\":\"Monthly housing payment amount\"}}}},\"properties\":{\"ssn\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"9-digit Social Security Number of the applicant (format: XXX-XX-XXXX)\"},\"alternate_names\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"Any other names the applicant is known by\"},\"date_of_birth\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"Applicant's date of birth in mm/dd/yyyy format\"},\"citizenship_status\":{\"enum\":[\"USC\",\"PRA\",\"NPRA\"],\"instruction\":\"Citizenship status of the applicant (USC: U.S. Citizen, PRA: Permanent Resident Alien, NPRA: Non-Permanent Resident Alien)\",\"inferenceType\":\"explicit\"},\"credit_type\":{\"enum\":[\"IND\",\"JNT\"],\"instruction\":\"Type of credit being applied for (IND: Individual credit, JNT: Joint credit)\",\"inferenceType\":\"explicit\"},\"total_borrowers\":{\"type\":\"number\",\"inferenceType\":\"explicit\",\"instruction\":\"Total number of borrowers if joint application\"},\"marital_status\":{\"enum\":[\"M\",\"S\",\"U\"],\"instruction\":\"Marital status (M: Married, S: Separated, U: Unmarried)\",\"inferenceType\":\"explicit\"},\"current_address_years\":{\"type\":\"number\",\"inferenceType\":\"explicit\",\"instruction\":\"Number of years at current address\"},\"current_address_months\":{\"type\":\"number\",\"inferenceType\":\"explicit\",\"instruction\":\"Additional months at current address\"},\"name\":{\"$ref\":\"#/definitions/name\",\"instruction\":\"Full legal name of applicant including first, middle, last and suffix\"},\"current_address\":{\"$ref\":\"#/definitions/address\",\"instruction\":\"Current address of the applicant\"},\"dependents\":{\"$ref\":\"#/definitions/dependents\",\"instruction\":\"Information about dependents\"},\"contact_info\":{\"$ref\":\"#/definitions/contact_info\",\"instruction\":\"Contact information for the applicant\"},\"housing\":{\"$ref\":\"#/definitions/housing\",\"instruction\":\"Housing information\"}}}"
UNDERWRITER_NOTE_SCHEMA = "{\"$schema\":\"http://json-schema.org/draft-07/schema#\",\"description\":\"Blueprint for extracting key information from mortgage underwriter's notes\",\"class\":\"Mortgage Underwriter Notes\",\"type\":\"object\",\"definitions\":{\"evaluation\":{\"type\":\"object\",\"properties\":{\"value\":{\"type\":\"number\",\"inferenceType\":\"explicit\",\"instruction\":\"Numerical value associated with the metric\"},\"assessment\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"Underwriter's qualitative assessment (e.g., strong, high, robust)\"},\"impact\":{\"enum\":[\"POSITIVE\",\"NEGATIVE\",\"NEUTRAL\"],\"instruction\":\"Impact on application (POSITIVE: strengthens application, NEGATIVE: weakens application, NEUTRAL: no significant impact)\",\"inferenceType\":\"explicit\"},\"notes\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"Additional notes or context about this metric\"}}}},\"properties\":{\"ltv_ratio\":{\"$ref\":\"#/definitions/evaluation\",\"instruction\":\"Loan-to-Value ratio assessment including percentage and qualitative evaluation\"},\"dti_ratio\":{\"$ref\":\"#/definitions/evaluation\",\"instruction\":\"Debt-to-Income ratio assessment including percentage and qualitative evaluation\"},\"liquid_assets\":{\"$ref\":\"#/definitions/evaluation\",\"instruction\":\"Assessment of applicant's liquid assets including dollar amount and qualitative evaluation\"},\"payment_shock_present\":{\"type\":\"boolean\",\"inferenceType\":\"explicit\",\"instruction\":\"Indicates if there is payment shock when comparing current rent to projected mortgage payment\"},\"payment_shock_notes\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"Details about payment shock assessment or comparison between current housing costs and projected mortgage\"},\"credit_history_clean\":{\"type\":\"boolean\",\"inferenceType\":\"explicit\",\"instruction\":\"Indicates if the credit history is clean with no derogatory events\"},\"credit_history_notes\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"Additional notes about credit history quality and impact on application\"},\"asset_diversity\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"Assessment of the applicant's asset diversity and what it indicates about financial responsibility\"},\"employment_industry\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"Industry where the applicant works (e.g., tech, healthcare, education)\"},\"employment_years\":{\"type\":\"number\",\"inferenceType\":\"explicit\",\"instruction\":\"Number of years the applicant has been employed in their current industry\"},\"income_stability_notes\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"Assessment of income stability and its impact on creditworthiness\"},\"primary_concerns\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"Primary issues or concerns identified by the underwriter\"},\"required_actions\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"Actions or strategies required to address concerns or strengthen the application\"}}}"
ASSETS_LIABILITIES_SCHEMA = "{\"$schema\":\"http://json-schema.org/draft-07/schema#\",\"description\":\"This is a blueprint for a mortgage loan application form\",\"class\":\"Mortgage Loan Application Form\",\"type\":\"object\",\"definitions\":{\"account\":{\"type\":\"object\",\"properties\":{\"account_type\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"Type of account\"},\"financial_institution\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"Name of financial institution\"},\"account_number\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"Account number\"},\"cash_or_market_value\":{\"type\":\"number\",\"inferenceType\":\"explicit\",\"instruction\":\"Cash or market value\"}}},\"other_asset\":{\"type\":\"object\",\"properties\":{\"asset_or_credit_type\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"Type of asset or credit\"},\"cash_or_market_value\":{\"type\":\"number\",\"inferenceType\":\"explicit\",\"instruction\":\"Cash or market value\"}}},\"liability\":{\"type\":\"object\",\"properties\":{\"account_type\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"Type of liability account\"},\"company_name\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"Company or creditor name\"},\"account_number\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"Account number\"},\"unpaid_balance\":{\"type\":\"number\",\"inferenceType\":\"explicit\",\"instruction\":\"Current unpaid balance\"},\"to_be_paid_off\":{\"type\":\"boolean\",\"inferenceType\":\"explicit\",\"instruction\":\"Will be paid off at or before closing\"},\"monthly_payment\":{\"type\":\"number\",\"inferenceType\":\"explicit\",\"instruction\":\"Monthly payment amount\"}}},\"bank_accounts\":{\"type\":\"object\",\"properties\":{\"account_type\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"Type of account\"},\"financial_institution\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"Name of financial institution\"},\"account_number\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"Account number\"},\"cash_or_market_value\":{\"type\":\"number\",\"inferenceType\":\"explicit\",\"instruction\":\"Cash or market value\"}}},\"other_assets_credits\":{\"type\":\"object\",\"properties\":{\"asset_or_credit_type\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"Type of asset or credit\"},\"cash_or_market_value\":{\"type\":\"number\",\"inferenceType\":\"explicit\",\"instruction\":\"Cash or market value\"}}},\"liabilities\":{\"type\":\"object\",\"properties\":{\"account_type\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"Type of liability account\"},\"company_name\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"Company or creditor name\"},\"account_number\":{\"type\":\"string\",\"inferenceType\":\"explicit\",\"instruction\":\"Account number\"},\"unpaid_balance\":{\"type\":\"number\",\"inferenceType\":\"explicit\",\"instruction\":\"Current unpaid balance\"},\"to_be_paid_off\":{\"type\":\"boolean\",\"inferenceType\":\"explicit\",\"instruction\":\"Will be paid off at or before closing\"},\"monthly_payment\":{\"type\":\"number\",\"inferenceType\":\"explicit\",\"instruction\":\"Monthly payment amount\"}}}},\"properties\":{\"bank_accounts\":{\"type\":\"array\",\"instruction\":\"Bank accounts, retirement, and other accounts you have\",\"items\":{\"$ref\":\"#/definitions/bank_accounts\"}},\"bank_accounts_enum\":{\"enum\":[\"Checking\",\"Savings\",\"Money Market\",\"Certificate of Deposit\",\"Mutual Fund\",\"Stocks\",\"Stock Options\",\"Bonds\",\"Retirement\",\"Bridge Loan Proceeds\",\"Individual Development Account\",\"Trust Account\",\"Cash Value of Life Insurance\"],\"instruction\":\"Types of bank and investment accounts\",\"inferenceType\":\"explicit\"},\"other_assets_credits\":{\"type\":\"array\",\"instruction\":\"Other assets and credits you have\",\"items\":{\"$ref\":\"#/definitions/other_assets_credits\"}},\"other_assets_credits_enum\":{\"enum\":[\"Proceeds from Real Estate\",\"Proceeds from Sale of\",\"Unsecured Borrowed Funds\",\"Earnest Money\",\"Relocation Funds\",\"Sweat Equity\",\"Property to be sold on or Non-Real Estate Asset\",\"Other\",\"Employer Assistance\",\"Rent Credit\",\"Trade Equity\",\"Secured Borrowed Funds\",\"Lot Equity\"],\"instruction\":\"Types of other assets and credits\",\"inferenceType\":\"explicit\"},\"other_assets_credits_does_not_apply\":{\"type\":\"boolean\",\"inferenceType\":\"explicit\",\"instruction\":\"Check if other assets and credits do not apply\"},\"liabilities\":{\"type\":\"array\",\"instruction\":\"Liabilities - credit cards, other debts, and leases that you owe\",\"items\":{\"$ref\":\"#/definitions/liabilities\"}},\"liabilities_enum\":{\"enum\":[\"Revolving\",\"Installment\",\"Open 30-Day\",\"Lease\",\"Other\"],\"instruction\":\"Types of liabilities\",\"inferenceType\":\"explicit\"},\"liabilities_does_not_apply\":{\"type\":\"boolean\",\"inferenceType\":\"explicit\",\"instruction\":\"Check if liabilities do not apply\"},\"total_assets_value\":{\"type\":\"number\",\"inferenceType\":\"explicit\",\"instruction\":\"Total value of all assets\"},\"total_liabilities_amount\":{\"type\":\"number\",\"inferenceType\":\"explicit\",\"instruction\":\"Total amount of all liabilities\"}}}"

if __name__ == "__main__":
    main()
{
  "openapi": "3.0.4",
  "info": {
    "title": "Mortgage Application Management API",
    "version": "1.0.0",
    "description": "API for managing mortgage applications"
  },
  "servers": [
    {
      "url": "https://xzmi1zo3r4.execute-api.us-east-1.amazonaws.com"
    }
  ],
  "paths": {
    "/applications": {
      "post": {
        "summary": "Create a new mortgage application JSON",
        "operationId": "create_mortgage_application",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MortgageApplication"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Application created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "application_id": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique identifier of the created mortgage application"
                    }
                  },
                  "required": ["application_id"]
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "MortgageApplicationResponse": {
        "type": "object",
        "properties": {
          "application_id": {
            "type": "string",
            "format": "uuid",
            "description": "Unique identifier of the created mortgage application"
          }
        },
        "required": ["application_id"]
      },
      "MortgageApplication": {
        "type": "object",
        "properties": {
          "borrower_name": {
            "type": "string",
            "description": "Full name of the borrower"
          },
          "ssn": {
            "type": "string",
            "description": "Social Security Number of the borrower"
          },
          "loan_amount": {
            "type": "number",
            "description": "Requested loan amount"
          },
          "assets": {
            "$ref": "#/components/schemas/Assets"
          },
          "employment_history": {
            "type": "array",
            "description": "Borrower's employment history",
            "items": {
              "$ref": "#/components/schemas/EmploymentHistoryItem"
            }
          },
          "loan_information": {
            "$ref": "#/components/schemas/LoanInformation"
          },
          "borrower_personal_information": {
            "$ref": "#/components/schemas/PersonalInformation"
          },
          "co_borrower_personal_information": {
            "$ref": "#/components/schemas/PersonalInformation"
          },
          "underwriter_notes": {
            "type": "array",
            "description": "Additional underwriter notes from the mortgage application",
            "items": {
              "type": "string",
              "description": "A single note or comment text"
            }
          }
        },
        "required": [
          "borrower_name",
          "ssn",
          "loan_amount",
          "assets",
          "employment_history",
          "loan_information",
          "borrower_personal_information"
        ]
      },
      "Assets": {
        "type": "object",
        "description": "List of financial assets held by the borrower",
        "properties": {
          "accounts": {
            "type": "array",
            "description": "Borrower's financial accounts",
            "items": {
              "$ref": "#/components/schemas/AssetAccount"
            }
          }
        },
        "required": ["accounts"]
      },
      "AssetAccount": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "enum": ["checking", "savings", "retirement", "stocks", "other"],
            "description": "Type of financial account"
          },
          "account_number": {
            "type": "string",
            "description": "Account number of the financial asset"
          },
          "institution": {
            "type": "string",
            "description": "Financial institution where the account is held"
          },
          "value": {
            "type": "number",
            "description": "Current monetary value of the account"
          }
        },
        "required": ["type", "account_number", "institution", "value"]
      },
      "EmploymentHistoryItem": {
        "type": "object",
        "properties": {
          "employer": {
            "type": "string",
            "description": "Name of the employer"
          },
          "address": {
            "type": "string",
            "description": "Employer address"
          },
          "position": {
            "type": "string",
            "description": "Job title or position"
          },
          "monthly_base_income": {
            "type": "integer",
            "description": "Monthly base income earned"
          },
          "monthly_bonus_income": {
            "type": "integer",
            "description": "Monthly bonus or additional income (optional)"
          },
          "start_date": {
            "type": "string",
            "format": "date",
            "description": "Employment start date in ISO 8601 format"
          },
          "end_date": {
            "type": "string",
            "format": "date",
            "description": "Employment end date in ISO 8601 format (if applicable)"
          }
        },
        "required": [
          "employer",
          "address",
          "position",
          "monthly_base_income",
          "start_date"
        ]
      },
      "LoanInformation": {
        "type": "object",
        "description": "Summary of details specific to the mortgage loan",
        "properties": {
          "purpose": {
            "type": "string",
            "enum": ["Purchase", "Refinance", "Construction", "Other"],
            "description": "Purpose of the requested loan"
          },
          "occupancy": {
            "type": "string",
            "enum": [
              "Primary Residence",
              "Secondary Residence",
              "Investment Property"
            ],
            "description": "Intended occupancy of the property"
          },
          "property": {
            "$ref": "#/components/schemas/Property"
          }
        },
        "required": ["purpose", "occupancy", "property"]
      },
      "Property": {
        "type": "object",
        "properties": {
          "address": {
            "type": "string",
            "description": "Street address of the property being financed"
          },
          "value": {
            "type": "number",
            "description": "Appraised value or purchase price"
          }
        },
        "required": ["address", "value"]
      },
      "PersonalInformation": {
        "type": "object",
        "description": "Borrower's personal details and contact information",
        "properties": {
          "date_of_birth": {
            "type": "string",
            "format": "date",
            "description": "Borrower's date of birth"
          },
          "citizenship": {
            "type": "string",
            "enum": [
              "U.S. Citizen",
              "Permanent Resident",
              "Non-Resident Alien"
            ],
            "description": "Borrower's citizenship or residency status"
          },
          "marital_status": {
            "type": "string",
            "enum": ["Single", "Married", "Separated", "Divorced", "Widowed"],
            "description": "Borrower's marital status"
          },
          "dependents": {
            "type": "integer",
            "minimum": 0,
            "description": "Number of dependents"
          },
          "credit_type": {
            "type": "string",
            "enum": ["Individual application", "Joint application"],
            "description": "Type of credit application"
          },
          "contact": {
            "$ref": "#/components/schemas/ContactInformation"
          }
        },
        "required": [
          "date_of_birth",
          "citizenship",
          "marital_status",
          "dependents",
          "credit_type",
          "contact"
        ]
      },
      "ContactInformation": {
        "type": "object",
        "description": "Borrower's contact information and housing situation",
        "properties": {
          "address": {
            "type": "string",
            "description": "Current residential address"
          },
          "cell_phone": {
            "type": "string",
            "description": "Cell phone number"
          },
          "home_phone": {
            "type": "string",
            "description": "Home phone number (optional)"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email address"
          },
          "housing_payment": {
            "type": "number",
            "description": "Monthly housing payment (rent or mortgage)"
          },
          "housing_situation": {
            "type": "string",
            "enum": ["Renting", "Own", "Living with Others", "Other"],
            "description": "Current housing arrangement"
          }
        },
        "required": [
          "address",
          "cell_phone",
          "email",
          "housing_payment",
          "housing_situation"
        ]
      }
    }
  }
}

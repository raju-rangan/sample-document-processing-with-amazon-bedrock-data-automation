{
  "openapi": "3.1.0",
  "servers": [
    {
      "url": "https://xzmi1zo3r4.execute-api.us-east-1.amazonaws.com"
    }
  ],
  "info": {
    "title": "Application Management API",
    "version": "1.0.0",
    "description": "API for managing applications"
  },
  "paths": {
    "/applications": {
      "post": {
        "summary": "Create a new application",
        "operationId": "create_application",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MortgageApplication"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Application created successfully"
          }
        }
      },
      "get": {
        "summary": "List all applications with optional filtering and pagination",
        "operationId": "list_applications",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "schema": { "type": "string" },
            "description": "Maximum number of applications to return"
          },
          {
            "name": "last_evaluated_key",
            "in": "query",
            "schema": { "type": "string" },
            "description": "Last evaluated key for pagination"
          }
        ],
        "responses": {
          "200": {
            "description": "List of applications returned successfully"
          }
        }
      }
    },
    "/applications/{application_id}": {
      "get": {
        "summary": "Get a specific application by ID",
        "operationId": "get_application",
        "parameters": [
          {
            "name": "application_id",
            "in": "path",
            "required": true,
            "schema": { "type": "string" },
            "description": "The unique identifier of the application"
          }
        ],
        "responses": {
          "200": {
            "description": "Application details retrieved successfully"
          },
          "404": {
            "description": "Application not found"
          }
        }
      },
      "put": {
        "summary": "Update an existing application",
        "operationId": "update_application",
        "parameters": [
          {
            "name": "application_id",
            "in": "path",
            "required": true,
            "schema": { "type": "string" },
            "description": "The unique identifier of the application"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "status": {
                    "type": "string",
                    "description": "Status of the application (active, inactive, or pending)"
                  },
                  "configuration": {
                    "type": "object",
                    "description": "Application-specific configuration data"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Application updated successfully"
          },
          "404": {
            "description": "Application not found"
          }
        }
      },
      "delete": {
        "summary": "Delete an application by ID",
        "operationId": "delete_application",
        "parameters": [
          {
            "name": "application_id",
            "in": "path",
            "required": true,
            "schema": { "type": "string" },
            "description": "The unique identifier of the application"
          }
        ],
        "responses": {
          "204": {
            "description": "Application deleted successfully"
          },
          "404": {
            "description": "Application not found"
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "MortgageApplication": {
        "type": "object",
        "properties": {
          "borrower_name": {
            "type": "string",
            "description": "Full name of the borrower"
          },
          "ssn": {
            "type": "string",
            "description": "Social Security Number of the borrower"
          },
          "loan_amount": {
            "type": "number",
            "description": "Requested loan amount"
          },
          "assets": {
            "$ref": "#/components/schemas/Assets"
          },
          "declarations": {
            "$ref": "#/components/schemas/Declarations"
          },
          "employment_information": {
            "$ref": "#/components/schemas/EmploymentInformation"
          },
          "liabilities": {
            "$ref": "#/components/schemas/Liabilities"
          },
          "loan_information": {
            "$ref": "#/components/schemas/LoanInformation"
          },
          "loan_originator_information": {
            "$ref": "#/components/schemas/LoanOriginatorInformation"
          },
          "personal_information": {
            "$ref": "#/components/schemas/PersonalInformation"
          }
        },
        "required": [
          "borrower_name",
          "ssn",
          "loan_amount",
          "assets",
          "declarations",
          "employment_information",
          "liabilities",
          "loan_information",
          "loan_originator_information",
          "personal_information"
        ]
      },
      "Assets": {
        "type": "object",
        "properties": {
          "accounts": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/FinancialAccount"
            }
          },
          "other_assets": {
            "type": "number",
            "description": "Value of other assets not listed in accounts"
          }
        },
        "required": ["accounts"]
      },
      "FinancialAccount": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "enum": ["checking", "savings", "retirement", "stocks", "other"]
          },
          "account_number": { "type": "string" },
          "institution": { "type": "string" },
          "value": { "type": "number" }
        },
        "required": ["type", "account_number", "institution", "value"]
      },
      "Declarations": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "question": { "type": "string" },
            "answer": { "type": "boolean" }
          },
          "required": ["question", "answer"]
        }
      },
      "EmploymentInformation": {
        "type": "object",
        "properties": {
          "employer": { "type": "string" },
          "address": { "type": "string" },
          "phone": { "type": "string" },
          "position": { "type": "string" },
          "monthly_income": {
            "$ref": "#/components/schemas/Income"
          },
          "start_date": {
            "type": "string",
            "format": "date",
            "description": "Employment start date in ISO 8601 format"
          },
          "time_in_field": {
            "$ref": "#/components/schemas/Duration"
          }
        },
        "required": [
          "employer",
          "address",
          "phone",
          "position",
          "monthly_income",
          "start_date",
          "time_in_field"
        ]
      },
      "Income": {
        "type": "object",
        "properties": {
          "base": { "type": "number" },
          "bonus": { "type": "number" }
        },
        "required": ["base", "bonus"]
      },
      "Duration": {
        "type": "object",
        "properties": {
          "years": { "type": "integer", "minimum": 0 },
          "months": { "type": "integer", "minimum": 0, "maximum": 11 }
        },
        "required": ["years", "months"]
      },
      "Liabilities": {
        "type": "array",
        "items": {
          "$ref": "#/components/schemas/LoanAccount"
        }
      },
      "LoanAccount": {
        "type": "object",
        "properties": {
          "account_number": { "type": "string" },
          "institution": { "type": "string" },
          "balance": { "type": "number" },
          "monthly_payment": { "type": "number" },
          "type": {
            "type": "string",
            "enum": ["Other Loan", "Installment Loan", "Revolving Credit"]
          }
        },
        "required": [
          "account_number",
          "institution",
          "balance",
          "monthly_payment",
          "type"
        ]
      },
      "LoanInformation": {
        "type": "object",
        "properties": {
          "purpose": {
            "type": "string",
            "enum": ["Purchase", "Refinance", "Construction", "Other"]
          },
          "occupancy": {
            "type": "string",
            "enum": [
              "Primary Residence",
              "Secondary Residence",
              "Investment Property"
            ]
          },
          "property": {
            "$ref": "#/components/schemas/Property"
          }
        },
        "required": ["purpose", "occupancy", "property"]
      },
      "Property": {
        "type": "object",
        "properties": {
          "address": { "type": "string" },
          "value": { "type": "number" }
        },
        "required": ["address", "value"]
      },
      "LoanOriginatorInformation": {
        "type": "object",
        "properties": {
          "loan_originator_name": { "type": "string" },
          "loan_originator_nmlsr_id": { "type": "string" },
          "originator_state_license_id": { "type": "string" },
          "organization": { "type": "string" },
          "organization_nmlsr_id": { "type": "string" },
          "organization_state_license_id": { "type": "string" },
          "address": { "type": "string" },
          "phone": { "type": "string" },
          "email": { "type": "string", "format": "email" }
        },
        "required": [
          "loan_originator_name",
          "loan_originator_nmlsr_id",
          "originator_state_license_id",
          "organization",
          "organization_nmlsr_id",
          "organization_state_license_id",
          "address",
          "phone",
          "email"
        ]
      },
      "PersonalInformation": {
        "type": "object",
        "properties": {
          "date_of_birth": { "type": "string", "format": "date" },
          "citizenship": {
            "type": "string",
            "enum": ["U.S. Citizen", "Permanent Resident", "Non-Resident Alien"]
          },
          "marital_status": {
            "type": "string",
            "enum": ["Single", "Married", "Separated", "Divorced", "Widowed"]
          },
          "dependents": { "type": "integer", "minimum": 0 },
          "credit_type": {
            "type": "string",
            "enum": ["Individual application", "Joint application"]
          },
          "contact": {
            "$ref": "#/components/schemas/ContactInformation"
          }
        },
        "required": [
          "date_of_birth",
          "citizenship",
          "marital_status",
          "dependents",
          "credit_type",
          "contact"
        ]
      },
      "ContactInformation": {
        "type": "object",
        "properties": {
          "current_address": { "type": "string" },
          "time_at_address": { "$ref": "#/components/schemas/Duration" },
          "cell_phone": { "type": "string" },
          "home_phone": { "type": "string" },
          "email": { "type": "string", "format": "email" },
          "housing_payment": { "type": "number" },
          "housing_situation": {
            "type": "string",
            "enum": ["Renting", "Own", "Living with Others", "Other"]
          }
        },
        "required": [
          "current_address",
          "time_at_address",
          "cell_phone",
          "email",
          "housing_payment",
          "housing_situation"
        ]
      }
    }
  }
}
